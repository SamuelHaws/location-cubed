<ngx-spinner *ngIf="!(isCrimeDataLoaded && isBusinessDataLoaded && isZoneDataLoaded)" bdColor="rgba(0, 0, 0, 0.8)"
  size="medium" color="#fff" type="square-jelly-box" [fullScreen]="true">
  <p style="color: white"> Fetching Data... </p>
</ngx-spinner>

<div *ngIf="isCrimeDataLoaded && isBusinessDataLoaded && isZoneDataLoaded" class="card map-overlay" id="back-overlay">
  <div class="card-body text-center p-1">
    <button type="button" class="btn btn-primary m-1" (click)="back()"><i class="fas fa-arrow-left"></i> Back to
      Search</button>
  </div>
</div>

<div *ngIf="isCrimeDataLoaded && isBusinessDataLoaded && isZoneDataLoaded" class="card map-overlay" id="legend-overlay">
  <div class="card-body p-2">
    <h5 class="card-title">Legend</h5>
    <div class="d-flex flex-column">
      <div class="d-flex align-items-center">
        <input type="checkbox" name="crimes" id="crimes" checked (click)="toggleCrimeHeatmap()">
        <label class="pl-2 mb-0" for="crimes">Crime Incidents</label>
      </div>
      <div class="d-flex align-items-center">
        <input type="checkbox" name="businesses" id="businesses" checked (click)="toggleBusinessHeatmap()">
        <label class="pl-2 mb-0" for="businesses">Competitor Businesses</label>
      </div>
      <div class="d-flex align-items-center">
        <input type="checkbox" name="zoning" id="zoning" checked (click)="toggleZoneHeatmap()">
        <label class="pl-2 mb-0" for="zoning">Commercial Zones</label>
      </div>
      <button type="button" class="btn btn-primary m-1" click="back()">Back to Search</button>
    </div>
  </div>
</div>

<agm-map *ngIf="isCrimeDataLoaded && isBusinessDataLoaded && isZoneDataLoaded" [latitude]="latitude"
  [longitude]="longitude" [mapTypeId]="mapType" [zoom]="zoom" [maxZoom]="maxZoom" (mapReady)="onMapLoad($event)">
</agm-map>